<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: api.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: api.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>const express = require('express');
const router = express.Router();

/**
 * Router Principal para el api de SECCOM
 * 
 * @author Ricardo Jose Garcia Santos
 * @date 2020-10-05
 * @namespace api
 */

// para que es necesario router
// R es el mecanismo que permite registrar rutas
//   y controladores (handlers) para el servidor
//   web.

//configurar las rutas en router
//Métodos de registro
//get  --- consulta --- select
//post --- crear recursos --- insert
//put  --- actualizar un recurso --- update
//delete  --- borrar un recurso --- delete
//-----------------------------------------

//dos parámetros
//1) path: constante (texto) de una ruta -- toda ruta debe empezar con /
//2) handler: función (req, res, next) { }
//                     req: información que se recibe de la petición
//                     res: es la información que se le enviara al solicitante
//                     next: es un método para llamar a la siguiente promesa en la cola.
//                             MIDLEWARES.
const productosRoutes = require('./api/productos');
const productosRoutes2 = require('./api/productosdb');

/**
 * Ruta que permite revisar la version vigente de el API
 * @method version
 * @memberof api
 * 
 * @returns Objeto JSON con los datos generales del api
 */

router.get('/version', (req, res)=>{
    let versionObj = {
        app:"Simple Ecommerce SECOM API",
        version: "0.0.0.1",
        state: "alpha"
        }
    res.status(200).json(versionObj);
    }
);

router.use('/productos',productosRoutes);
router.use('/productosdb',productosRoutes2);


router.get('/param/:edad',(req,res)=>{
    var edad = parseInt(req.params.edad);
    res.status(200).json({"Edad":edad});
});

router.post('/new',(req,res)=>{
        // $_POST datos del formulario http
        //let msg = req.body.msg;
        //es6 destructuring
        let { msg } = req.body;
        res.status(200).json ({"Mensaje":msg});
}); // new

/**
 * Ruta que permite modificar ub elemento de Productos
 * @method update
 * @memberof api
 * 
 * @param {string} id identificador del registro(params)
 * @param {string} edad Edad a actualizar eb el registro (body)
 * 
 * @returns {json} Resumen de la Edad modificada en el registro
 */


router.put('/update/:id',(req,res)=>{
    let { id } = req.params;
    id = parseInt(id);
    let { edad } = req.body;

    res.status(200).json ({id, edad});
});

router.delete('/delete/:id',(req,res)=>{
    let { id } = req.params;
    id = Number(id);
    res.status(200).json({id});
});

module.exports = router;</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Namespaces</h3><ul><li><a href="api.html">api</a></li><li><a href="api_productos.html">api/productos</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.6</a> on Tue Nov 24 2020 01:41:59 GMT-0600 (GMT-06:00)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
